---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import ContactForm from '../components/ContactForm.astro';
---

<Layout title="Homepage">
    <div
        id="hero-section"
        class="flex min-h-[100svh] px-4 lg:px-8 xl:px-16"
    >
        <div class="m-auto w-full max-w-screen-xl">
            <div class="max-w-lg">
                <h1
                    class="mb-2 text-5xl font-bold lg:text-8xl xl:text-9xl"
                    data-animate="[&>span>span]:to:y-0|stagger-0.25"
                >
                    <span class="relative inline-block overflow-hidden">
                        <span class="inline-block translate-y-full">
                            Hudson
                        </span>
                    </span>
                    <span class="relative inline-block overflow-hidden">
                        <span class="inline-block translate-y-full">
                            Whittaker
                        </span>
                    </span>
                </h1>
                <h2>
                    I'm a software engineer. This is my website. Welcome ðŸ‘‹
                </h2>
            </div>
        </div>
    </div>
    <div
        class="container mx-auto grid items-center gap-16 p-6 pt-0 xl:grid-cols-2 xl:gap-32"
    >
        <div class="grid grid-cols-1 items-start gap-16">
            <Card
                title="Web Development"
                link="/webdev"
            >
                <p>
                    I have a software engineering degree. And yet, for the past <span
                        id="time-counter">4 years</span
                    >, I've been successfully tricking
                    <a
                        href="https://mir.us"
                        target="_blank"
                        @click.prevent.stop="window.open('https://mir.us', '_blank')"
                    >
                        Mirus</a
                    > into thinking that I'm a "Designer/Front-end Developer". How
                    did I get here?
                </p>
            </Card>
            <Card
                title="Film Photography"
                link="/film"
            >
                <p>
                    This interest has only developed (get it?) recently. In May
                    2022 I went to Iceland for a week and my friend let me shoot
                    some color positive film in his Cannon A-1. Soon after, I
                    got my own Nikon FE and have been hooked ever since.
                </p>
            </Card>
            <Card
                title="Free Clout"
                link="/free-clout"
            >
                <p>
                    Over the years, I've discovered a lot of people, software,
                    and resources that I like a lot. I've decided to try and
                    keep track of them here.
                </p>
            </Card>
        </div>
        <ContactForm title="Contact Form">
            <p>
                I'm not sure why you'd want to contact me, but if you do, this
                is the place to do it. I might get back to you; I might not.
            </p>
        </ContactForm>
    </div>
</Layout>
<script>
    import gsap from 'gsap';
    import glaze from 'glazejs';

    glaze({
        lib: {
            gsap: {
                core: gsap,
            },
        },
        // the root element which will be searched for elements
        // element: document,
        // the attribute to search for
        dataAttribute: 'data-animate',
        // custom breakpoints
        breakpoints: {
            // default: '(min-width: 1px)',
        },
        // watch elements for changes and restart animations with new settings
        watch: true,
    });

    // Time counter for Mirus employment
    function updateTimeCounter() {
        const startDate = new Date('2021-07-19T14:00:00Z'); // 9am Central = 2pm UTC
        const now = new Date();
        const diff = now.getTime() - startDate.getTime();

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor(
            (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        const counter = document.getElementById('time-counter');
        if (counter) {
            counter.textContent = `${days.toLocaleString()} days ${hours} hours ${minutes} minutes and ${seconds} seconds`;
        }
    }

    // Update immediately and then every second
    updateTimeCounter();
    setInterval(updateTimeCounter, 1000);
</script>
